<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abenteuer-Spiel</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            font-family: 'Arial', sans-serif;
            background: linear-gradient(to bottom, #87ceeb, #fff);
        }

        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
        }

        .character {
            position: absolute;
            width: 80px;
            height: 80px;
            background: url('https://via.placeholder.com/80') no-repeat center;
            background-size: cover;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .item {
            position: absolute;
            width: 60px;
            height: 60px;
            background: url('https://via.placeholder.com/60') no-repeat center;
            background-size: cover;
            animation: float 3s infinite;
        }

        .score-board {
            position: absolute;
            top: 10px;
            left: 10px;
            font-size: 24px;
            color: #333;
            background: rgba(255, 255, 255, 0.8);
            padding: 10px;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        @keyframes float {
            0% { transform: translateY(0); }
            50% { transform: translateY(-20px); }
            100% { transform: translateY(0); }
        }
    </style>
</head>
<body>
    <div id="game-container">
        <div class="score-board">Punkte: <span id="score">0</span></div>
        <div id="character" class="character"></div>
        <div id="item1" class="item" style="top: 20%; left: 30%;"></div>
        <div id="item2" class="item" style="top: 70%; left: 50%;"></div>
        <div id="item3" class="item" style="top: 40%; left: 80%;"></div>
    </div>

    <script>
        const character = document.getElementById('character');
        const items = document.querySelectorAll('.item');
        const scoreDisplay = document.getElementById('score');
        let score = 0;

        // Bewegung mit Touch (Mobile) und Maus (Fallback)
        let isDragging = false;
        let startX, startY;

        function startDrag(e) {
            isDragging = true;
            const touch = e.touches ? e.touches[0] : e;
            startX = touch.clientX - character.offsetLeft;
            startY = touch.clientY - character.offsetTop;
        }

        function drag(e) {
            if (!isDragging) return;

            const touch = e.touches ? e.touches[0] : e;
            const x = touch.clientX - startX;
            const y = touch.clientY - startY;

            // Grenzen setzen
            const maxWidth = window.innerWidth - character.offsetWidth;
            const maxHeight = window.innerHeight - character.offsetHeight;
            character.style.left = `${Math.max(0, Math.min(maxWidth, x))}px`;
            character.style.top = `${Math.max(0, Math.min(maxHeight, y))}px`;

            checkCollision();
        }

        function endDrag() {
            isDragging = false;
        }

        // Event-Listener für Touch und Maus
        character.addEventListener('touchstart', startDrag);
        character.addEventListener('touchmove', drag);
        character.addEventListener('touchend', endDrag);
        character.addEventListener('mousedown', startDrag);
        window.addEventListener('mousemove', drag);
        window.addEventListener('mouseup', endDrag);

        // Kollisionsprüfung
        function checkCollision() {
            const characterRect = character.getBoundingClientRect();

            items.forEach((item) => {
                const itemRect = item.getBoundingClientRect();

                if (
                    characterRect.left < itemRect.right &&
                    characterRect.right > itemRect.left &&
                    characterRect.top < itemRect.bottom &&
                    characterRect.bottom > itemRect.top &&
                    item.style.display !== 'none'
                ) {
                    // Kollision erkannt
                    item.style.display = 'none';
                    score++;
                    scoreDisplay.textContent = score;

                    // Spiel gewonnen
                    if (score === items.length) {
                        alert('Herzlichen Glückwunsch! Alle Items gesammelt!');
                    }
                }
            });
        }
    </script>
</body>
</html>
