<!DOCTYPE html>
<html lang="de">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Abenteuer-Spiel</title>
    <style>
        /* Dein vorhandenes CSS bleibt unverändert */
        body {
            margin: 0;
            padding: 0;
            font-family: Arial, sans-serif;
            background: url('images/background.png') no-repeat center center fixed;
            background-size: cover;
            overflow: hidden;
            color: white;
        }

        /* Spiel-Container und Charakter */
        #game-container {
            position: relative;
            width: 100%;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            overflow: hidden;
        }

        .character {
            position: absolute;
            width: 80px;
            height: 100px;
            background-size: contain;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            cursor: grab;
            z-index: 2;
            transition: transform 0.2s ease-in-out, opacity 0.2s ease-in-out;
        }

        /* Touch-Interaktivität */
        .character.touch-active {
            box-shadow: 0 0 15px 5px rgba(255, 255, 0, 0.5);
        }
    </style>
</head>
<body>
    <div id="loader">
        <div class="progress-bar-container">
            <div class="progress-bar"></div>
        </div>
    </div>
    <div id="menu">
        <h1>LinEy v.1.2</h1>
        <button id="start-btn">Spiel starten</button>
        <button id="fullscreen-btn">Vollbild aktivieren</button>
    </div>

    <div id="game-container" style="display: none;">
        <div class="score-board">
            Punkte: <span id="score">0</span> | Level: <span id="level">1</span> | Diamanten: <span id="diamonds">0</span>
            <button id="back-to-menu-btn">Zurück zum Menü</button>
        </div>
        <div id="character" class="character" style="background: url('./images/character1.png') no-repeat center;"></div>
        <div class="countdown" id="countdown"></div>
    </div>

    <script>
        const loader = document.getElementById('loader');
        const menu = document.getElementById('menu');
        const startBtn = document.getElementById('start-btn');
        const fullscreenBtn = document.getElementById('fullscreen-btn');
        const gameContainer = document.getElementById('game-container');
        const character = document.getElementById('character');
        const scoreDisplay = document.getElementById('score');
        const levelDisplay = document.getElementById('level');
        const diamondsDisplay = document.getElementById('diamonds');
        const backToMenuBtn = document.getElementById('back-to-menu-btn');
        const countdownDisplay = document.getElementById('countdown');

        let selectedCharacter = 'character1';
        let score = 0;
        let level = 1;
        let diamonds = 0;
        let timeRemaining = 10;
        let gameInterval;
        let bonusRoundActive = false;

        let touchStartX, touchStartY;

        // Ladebildschirm
        setTimeout(() => {
            loader.style.display = 'none';
            menu.style.display = 'flex';
        }, 3000);

        // Spiel starten
        startBtn.addEventListener('click', () => {
            menu.style.display = 'none';
            gameContainer.style.display = 'flex';

            // Spiel-Timer
            gameInterval = setInterval(() => {
                timeRemaining--;
                countdownDisplay.textContent = `Nächste Runde in: ${timeRemaining}s`;

                if (timeRemaining <= 0) {
                    nextLevel();
                    timeRemaining = 10;  // Reset Timer
                }
            }, 1000);
        });

        // Zurück zum Menü
        backToMenuBtn.addEventListener('click', () => {
            gameContainer.style.display = 'none';
            menu.style.display = 'flex';
            score = 0;
            level = 1;
            diamonds = 0;
            scoreDisplay.textContent = score;
            levelDisplay.textContent = level;
            diamondsDisplay.textContent = diamonds;
            clearInterval(gameInterval);  // Spiel zurücksetzen
        });

        // Touch-Interaktivität - Start der Bewegung
        character.addEventListener('touchstart', (e) => {
            const touch = e.touches[0];
            touchStartX = touch.clientX - character.offsetLeft;
            touchStartY = touch.clientY - character.offsetTop;
            character.classList.add('touch-active'); // Visuellen Effekt hinzufügen
            e.preventDefault(); // Verhindert das Scrollen der Seite
        });

        // Touch-Interaktivität - Bewegung des Charakters
        character.addEventListener('touchmove', (e) => {
            e.preventDefault(); // Verhindert das Scrollen der Seite
            const touch = e.touches[0];
            const newX = touch.clientX - touchStartX;
            const newY = touch.clientY - touchStartY;

            // Begrenzung innerhalb des Containers
            const maxLeft = gameContainer.clientWidth - character.offsetWidth;
            const maxTop = gameContainer.clientHeight - character.offsetHeight;

            character.style.left = `${Math.min(Math.max(0, newX), maxLeft)}px`;
            character.style.top = `${Math.min(Math.max(0, newY), maxTop)}px`;
        });

        // Touch-End - Beenden der Bewegung
        character.addEventListener('touchend', () => {
            character.classList.remove('touch-active');
        });

        // Kollisionserkennung und Punktvergabe (Beispiel)
        function checkCollision() {
            const characterRect = character.getBoundingClientRect();
            const items = document.querySelectorAll('.item');
            
            items.forEach(item => {
                const itemRect = item.getBoundingClientRect();

                if (
                    characterRect.left < itemRect.right &&
                    characterRect.right > itemRect.left &&
                    characterRect.top < itemRect.bottom &&
                    characterRect.bottom > itemRect.top
                ) {
                    item.remove();
                    score++;
                    scoreDisplay.textContent = score;
                }
            });
        }

        // Level-up
        function nextLevel() {
            level++;
            levelDisplay.textContent = level;
            // Level-up Logik und Sounds hier hinzufügen
        }
    </script>
</body>
</html>
